<!-- BEGIN JAVASCRIPTS(Load javascripts at bottom, this will reduce page load time) -->
<!-- BEGIN CORE PLUGINS -->
<script src="<?php echo plugins_url('jquery.min.js'); ?>" type="text/javascript"></script>
<script src="<?php echo plugins_url('jquery.md5.min.js'); ?>" type="text/javascript"></script>

<script src="<?php echo plugins_url('jquery-migrate.min.js'); ?>" type="text/javascript"></script>
<!-- IMPORTANT! Load jquery-ui.min.js before bootstrap.min.js to fix bootstrap tooltip conflict with jquery ui tooltip -->
<script src="<?php echo plugins_url('jquery-ui/jquery-ui.min.js'); ?>" type="text/javascript"></script>
<script src="<?php echo plugins_url('bootstrap/js/bootstrap.min.js'); ?>" type="text/javascript"></script>
<script src="<?php echo plugins_url('bootstrap-hover-dropdown/bootstrap-hover-dropdown.min.js'); ?>" type="text/javascript"></script>
<script src="<?php echo plugins_url('jquery-slimscroll/jquery.slimscroll.min.js'); ?>" type="text/javascript"></script>
<script src="<?php echo plugins_url('jquery.blockui.min.js'); ?>" type="text/javascript"></script>
<script src="<?php echo plugins_url('jquery.cokie.min.js'); ?>" type="text/javascript"></script>
<script src="<?php echo plugins_url('uniform/jquery.uniform.min.js'); ?>" type="text/javascript"></script>
<script src="<?php echo plugins_url('bootstrap-switch/js/bootstrap-switch.min.js'); ?>" type="text/javascript"></script>
<script src="<?php echo plugins_url('bootstrap-fileinput/bootstrap-fileinput.js'); ?>" type="text/javascript"></script>
<script src="<?php echo plugins_url('bootstrap-confirmation/bootstrap-confirmation.min.js'); ?>" type="text/javascript"></script>

<!-- END CORE PLUGINS -->
<!-- BEGIN PAGE LEVEL PLUGINS -->
<script src="<?php echo plugins_url('jqvmap/jqvmap/jquery.vmap.js'); ?>" type="text/javascript"></script>
<script src="<?php echo plugins_url('jqvmap/jqvmap/maps/jquery.vmap.russia.js'); ?>" type="text/javascript"></script>
<script src="<?php echo plugins_url('jqvmap/jqvmap/maps/jquery.vmap.world.js'); ?>" type="text/javascript"></script>
<script src="<?php echo plugins_url('jqvmap/jqvmap/maps/jquery.vmap.europe.js'); ?>" type="text/javascript"></script>
<script src="<?php echo plugins_url('jqvmap/jqvmap/maps/jquery.vmap.germany.js'); ?>" type="text/javascript"></script>
<script src="<?php echo plugins_url('jqvmap/jqvmap/maps/jquery.vmap.usa.js'); ?>" type="text/javascript"></script>
<script src="<?php echo plugins_url('jqvmap/jqvmap/data/jquery.vmap.sampledata.js'); ?>" type="text/javascript"></script>
<!-- IMPORTANT! fullcalendar depends on jquery-ui.min.js for drag & drop support -->
<script src="<?php echo plugins_url('morris/morris.min.js'); ?>" type="text/javascript"></script>
<script src="<?php echo plugins_url('morris/raphael-min.js'); ?>" type="text/javascript"></script>
<script src="<?php echo plugins_url('jquery.sparkline.min.js'); ?>" type="text/javascript"></script>
<!-- END PAGE LEVEL PLUGINS -->
<!-- BEGIN PAGE LEVEL SCRIPTS -->
<script src="<?php echo js_url('intlTelInput.min'); ?>" type="text/javascript"></script>
<script src="<?php echo js_url('metronic'); ?>" type="text/javascript"></script>
<script src="<?php echo js_url('layout'); ?>" type="text/javascript"></script>
<script src="<?php echo js_url('quick-sidebar'); ?>" type="text/javascript"></script>
<srcipt src="<?php echo js_url('jquery.maskedinput'); ?>" type="text/javascript"></srcipt>
<script src="<?php echo js_url('demo'); ?>" type="text/javascript"></script>
<script src="<?php echo js_url('index3'); ?>" type="text/javascript"></script>
<script src="<?php echo js_url('tasks'); ?>" type="text/javascript"></script>
<script src="<?php echo js_url('charts-flotcharts'); ?>"></script>

<!-- END PAGE LEVEL SCRIPTS -->
<!-- BEGIN CHARTS FLOTS PLUGINS -->
<script src="<?php echo plugins_url('flot/jquery.flot.min.js'); ?>"></script>
<script src="<?php echo plugins_url('flot/jquery.flot.resize.min.js'); ?>"></script>
<script src="<?php echo plugins_url('flot/jquery.flot.pie.min.js'); ?>"></script>
<script src="<?php echo plugins_url('flot/jquery.flot.stack.min.js'); ?>"></script>
<script src="<?php echo plugins_url('flot/jquery.flot.crosshair.min.js'); ?>"></script>
<script src="<?php echo plugins_url('flot/jquery.flot.categories.min.js'); ?>" type="text/javascript"></script>
<script src="<?php echo plugins_url('amcharts/amcharts.js'); ?>"></script>
<script src="<?php echo plugins_url('amcharts/serial.js'); ?>"></script>
<script src="<?php echo plugins_url('amcharts/amstock.js'); ?>"></script>
<script src="<?php echo plugins_url('amcharts/plugins/dataloader/dataloader.min.js'); ?>"></script>
<script src="<?php echo plugins_url('amcharts/lang/fr.js'); ?>"></script>
<!-- END CHARTS FLOTS PLUGINS -->
<!-- BEGIN DATATABLES PLUGINS -->
<script src="<?php echo js_url('table-managed'); ?>"></script>
<script type="text/javascript" src="<?php echo plugins_url('select2/select2.min.js'); ?>"></script>
<script src="<?php echo base_url() ?>assets/plugins/jquery-validation/js/jquery.validate.min.js" type="text/javascript"></script>
<script src="<?php echo base_url() ?>assets/plugins/backstretch/jquery.backstretch.min.js" type="text/javascript"></script>
<script type="text/javascript" src="<?php echo plugins_url('datatables/dataTables.min.js'); ?>"></script>
<script type="text/javascript" src="<?php echo plugins_url('bootstrap-datepicker/js/bootstrap-datepicker.min.js'); ?>"></script>
<script type="text/javascript" src="<?php echo plugins_url('clockface/js/clockface.js') ;?>"></script>
<script type="text/javascript" src="<?php echo plugins_url('bootstrap-daterangepicker/moment.min.js'); ?>"></script>
<script type="text/javascript" src="<?php echo plugins_url('bootstrap-daterangepicker/daterangepicker.js'); ?>"></script>
<script type="text/javascript" src="<?php echo plugins_url('bootstrap-colorpicker/js/bootstrap-colorpicker.js'); ?>"></script>
<script type="text/javascript" src="<?php echo plugins_url('bootstrap-datetimepicker/js/bootstrap-datetimepicker.min.js'); ?>"></script>
<script type="text/javascript" src="<?php echo plugins_url('bootstrap-datetimepicker/js/locales/bootstrap-datetimepicker.fr.js'); ?>"></script>
<script type="text/javascript" src="<?php echo plugins_url('bootstrap-datepicker/locales/bootstrap-datepicker.fr.min.js'); ?>"></script>
<script src="<?php echo plugins_url('bootbox/bootbox.min.js'); ?>" type="text/javascript"></script>
<script src="<?php echo js_url('components-pickers'); ?>"></script>
<script src="<?php echo base_url() ?>assets/scripts/ui-alert-dialog-api.js" type="text/javascript"></script>
<!-- END DATATABLES PLUGINS -->
<script>

jQuery(document).ready(function() {   
	$("#residence_four").html("Siège social");
	$('[data-toggle="tooltip"]').tooltip(); 
   try {
   Metronic.init(); // init metronic core componets
   Layout.init(); // init layout
   TableManaged.init();
   Demo.init(); // init demo features   
   //QuickSidebar.init(); // init quick sidebar
   ComponentsPickers.init();
   ChartsFlotcharts.init();
   ChartsFlotcharts.initCharts();
   ChartsFlotcharts.initPieCharts();
   FormSamples.init();
   ChartsFlotcharts.initBarCharts();
   UIAlertDialogApi.init();   
   
    //Index.init(); // init index page
 Tasks.initDashboardWidget(); // init tash dashboard widget  
}
catch ($e) { // non-standard
   
}
//affichage ou non du prenom fournisseur
$(".Type").on('change', function(e){
                let selectVal = $(this).val(); 
                if(selectVal == 'Entreprise'){
                    $(".prenom").hide();
                    $("#residence_four").html("Siège social");
                }else{
                    $(".prenom").show();
					$("#residence_four").html("Lieu de résidence");
                }
                
            });
// affichage ou non du prenom client
$(".client").on("change", function(e){
						let radioVal = $(this).val();
						
						if($(this).is(':checked') && (radioVal === 'Entreprise') ){
							$("#prenom").hide();
						}else{
							$("#prenom").show();
						}
						

					})
//ajout de class sur select2
$('.searchable').select2({
				   templateResult: function (data, container) {
					if (data.element) {
					$(container).addClass($(data.element).attr("class"));
					}
					return data.text;
				  }
				});


			$('#ajouter').on("click", function(e){
				console.log("donnee");
			url = '<?php echo base_url() . "index.php/Clients/enregistrer"; ?>'
		  var donnee = $("#form").serialize();
		  var donnee1 = $("#form").serializeArray();
		 $.ajax({
				data : donnee,
				 method: "POST",
				 url: url,
				 dataType: "json",
				success: function(data){
				 // console.log(donnee);
				}
											
			}).done(function(data){
				if(data["error"]){
						console.log( "erreur");
						$('#message').html("Mail ou mot de passe incorect ou existent déjà")
					}else{
					$('#select-clients').append($('<option/>', { 
					value: donnee1[1]["value"] + " " + donnee1[2]["value"] ,
					text :donnee1[1]["value"] + " " + donnee1[2]["value"]
					 }));
					$('#client').modal('hide');
					}
			}).fail(function(){
				console.log(donnee1)
				
			})

	})

	
 
});
  //Affichage des modals Client et fournisseurs
     function show_modal(param)
              {

				 var valeur = param
                  if(valeur ==="ajout_client")
				  {
				 	// $('#select-clients').prop('selectedIndex',1)
				 	document.getElementById("select-clients").selectedIndex = "1";
				 	$('#select-clients').trigger('change');
                    $('#client').modal('show');
                 }
			
				if(valeur ==="ajout_fournisseur")
				{
					$('#select-fournisseurs').prop('selectedIndex',1)
					$('#select-fournisseurs').trigger('change');
                   $('#fournisseur').modal('show');
			    }
				if(valeur ==="create_priv")
				{
					//console.log("ok")
				 	$('#select-priv').prop('selectedIndex',0)
				    $('#privilege').modal('show');
			    }
              }
</script>


<script type="text/javascript">
		//fonction permettant de surligner le champ en cas d'erreur
		 function surligne(champ, erreur)
				{
					if(erreur)
						champ.style.backgroundColor = "#fba";
					else
						champ.style.backgroundColor = "";
				}
         // fonction vérifiant si le nombre de carractère saisi est >= 3
         function verifchamp(champ){
			
			   if(champ.value.length <3)
			   {
				//var msg = document.getElementById("nom");
				 //  msg.textContent="Entrez au moins 3 caractères";
				  // var prenom = document.getElementById("prenom");
				 //  prenom.textContent="Entrez au moins 3 caractères";
                 surligne(champ, true);
				 return false;  
			   }else
			   {
				   surligne(champ, false);
				   return true;
			   }
		   }
           // fonction vérifiant si le nombre de carractère saisi est >= 8 
		   //pour le numéro de téléphone et le mot de passe
		   function verifpass(champ){
			   if(champ.value.length <8)
			   {
				//var msg = document.getElementById("tel");
				//   msg.textContent="Le numéro de téléphone est incorect";
                 surligne(champ, true);
				 return false;  
			   }else
			   {
				
				   surligne(champ, false);
				   return true;
			   }
		   }
		  
          // fonction pour vérifier l'e-mail
		  function verifMail(champ)
			{
			var regex = /^[a-zA-Z0-9._-]+@[a-z0-9._-]{2,}\.[a-z]{2,4}$/;
			if(!regex.test(champ.value))
			{
				surligne(champ, true);
				return false;
			}
			else
			{
				surligne(champ, false);
				return true;
			}
			}

			
		</script>
<!-- END JAVASCRIPTS -->